"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.withTheme=exports.styles=void 0;var _createClass=function(){function e(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(r,t,o){return t&&e(r.prototype,t),o&&e(r,o),r}}(),_get=function e(r,t,o){null===r&&(r=Function.prototype);var n=Object.getOwnPropertyDescriptor(r,t);if(void 0===n){var s=Object.getPrototypeOf(r);return null===s?void 0:e(s,t,o)}if("value"in n)return n.value;var a=n.get;return void 0!==a?a.call(o):void 0},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},_extends=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},_react=require("react"),_react2=_interopRequireDefault(_react),_classnames=require("classnames"),_classnames2=_interopRequireDefault(_classnames),_styles=require("./styles"),_styles2=_interopRequireDefault(_styles),_fn=require("./fn"),_fn2=_interopRequireDefault(_fn),_utils=require("./utils");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}function _toArray(e){return Array.isArray(e)?e:Array.from(e)}function _toConsumableArray(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}var styles=exports.styles={},options={colors:{},fonts:{},clsPropName:"cls",clsMaps:{},fn:_extends({},_fn2.default)},transformStyle=function(e,r,t){var o=null,n=void 0;if(void 0!==t&&(n="string"==typeof t?t:Array.isArray(t)?_classnames2.default.apply(void 0,_toConsumableArray(t)):(0,_classnames2.default)(t)),n){o=Array.isArray(r)?r.slice():null!==r&&"object"===(void 0===r?"undefined":_typeof(r))?[r]:[];for(var s=n.replace(/-/g,"_").split(" "),a=0;a<s.length;a++){var i=s[a];if(i.length>0){var l=styles[i];if(!l){var u=_toArray(i.split(/_(?=[^_])/)),f=u[0],c=u.slice(1);"function"==typeof options.fn[f]&&(l=options.fn[f].apply(e,c))}l?Array.isArray(l)?Array.prototype.push.apply(o,l):o.push(l):console.warn("style '"+i+"' not found")}}}return o},recursiveStyle=function e(r){if(_react2.default.isValidElement(r)){var t=r.props,o={},n=!1,s={};if(options.clsPropName){s[options.clsPropName]="style";for(var a in t)a.substr(-options.clsPropName.length)===options.clsPropNameCap&&(s[a]=a.substr(0,a.length-options.clsPropName.length)+"Style")}Object.assign(s,options.clsMap);for(var i in s){var l=s[i],u=transformStyle(r,t[l],t[i]);u&&(o[l]=u,n=!0)}var f=t.children;if(Array.isArray(f)){f=_react2.default.Children.toArray(f);for(var c=0;c<f.length;c++){var p=f[c];if(_react2.default.isValidElement(p)){var y=e(p);y!==p&&(n=!0,f[c]=y)}}}else{var _=e(f);_!==f&&(n=!0,f=_)}if(n)return _react2.default.cloneElement(r,o,f)}return r},withTheme=exports.withTheme=function(e){if(e.prototype&&"render"in e.prototype){var r=e,t=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,r),_createClass(t,[{key:"render",value:function(){return recursiveStyle(_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this))}}]),t}();return t.displayName=r.displayName||r.name,t}var o=e;return function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return recursiveStyle(o.apply(this,r))}},build=exports.build=function(e,r){var t={};if(Array.isArray(_styles2.default)&&_styles2.default.forEach(function(e){return Object.assign(t,e)}),e.colors&&"object"===_typeof(e.colors))for(var o in e.colors){var n=e.colors[o];t[o]={color:n},t["bg-"+o]={backgroundColor:n},t["bd-"+o]={borderColor:n},t["tint-"+o]={tintColor:n}}if(e.fontFamilys&&"object"===_typeof(e.fontFamilys))for(var s in e.fontFamilys)t["ff-"+s]={fontFamily:e.fontFamilys[s]};Object.assign(styles,r.create((0,_utils.hyphensToUnderscores)(t)))};